<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% if session['tname'] == 'project' and session['type'] == 'manager'  %}
  {% extends 'sidebar.html' %}
  {% block content %}
   
  <div class="modal" tabindex="-1" role="dialog" id="editModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Edit Record</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <form action="{{ url_for('mpayout_edit') }}" method="POST">
		<label>Start Date ( {{ row[2]  }}  )   </label>
		<input type="date" name="startdate"  class="form-control" id="sdate">
		<label>End Date ( {{ row[3]  }}  )</label>
		<input type="date" name="enddate"   class="form-control" id="edate">
		 <script>
// Function to set the min attribute of the date input field to today's date
function setMinDate() {
    var today = new Date();
    var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); // January is 0!
    var yyyy = today.getFullYear();
    var minDate = yyyy + '-' + mm + '-' + dd;

    document.getElementById("sdate").setAttribute("min", minDate);
    document.getElementById("edate").setAttribute("min", minDate);
}

// Call the setMinDate function when the page loads
window.onload = setMinDate;
</script>

		 <label>Activity</label>
                <input type="text" name="Activity" value=" {{ row[4] }}  "  class="form-control">
		<label>Start Time ( {{ row[6] }}  )  </label>
                <input type="time" name="start_time"   class="form-control">
		<label>End Time ( {{ row[7] }}  )  </label>
                <input type="time" name="end_time" class="form-control">
		<input type="text" name="ide" value="{{ id }}">
                <input type="submit" name="submit" class="form-control btn btn-primary">
            </form>
            
        </div>
      </div>
    </div>
  </div>
  
  <script>
      // JavaScript code to show the modal automatically
      window.addEventListener('DOMContentLoaded', function () {
          $('#editModal').modal('show');
      });
  </script>
  
 




  {% endblock %}
  
         
{% else %}
<script>
 // Display a SweetAlert message and logout after 5 seconds
 window.onload = function() {
     Swal.fire({
         title: 'Access Denied!',
         text: 'You are not allowed to view this page.',
         icon: 'warning',
         timer: 5000, // Automatically close the alert after 5 seconds
         timerProgressBar: true,
         showConfirmButton: false
     }).then((result) => {
         // Redirect to logout page after the alert is closed
         if (result.dismiss === Swal.DismissReason.timer) {
             window.location.href = "/logout";
         }
     });
 };
</script>
{% endif %}
