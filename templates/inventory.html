<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% if session['tname'] == 'operation'  %}
{% extends 'sidebar.html' %}
{% block content %}
 


<div class="container-fluid">
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h5 class=" mb-0 text-black">Inventory  Dashboard</h5>
        <a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i
                class="fas fa-download fa-sm text-white-50"></i> Generate Report</a>
    </div>
    <div class="card mb-4">
        <div class="card-header">
                                    <i class="fas fa-table me-1"></i>
                                    Add Inventory
                                </div>
                                <div class="card-body">
                                    <div class="row">
                   
                       
                
                <div class="col-lg-2">
                    <form action="{{ url_for('inventoryadd') }}" method="post" >
                    <label>Enter  OEM</label><br>
                    <input type="text" name="OEM" required class="form-control">
                </div>
                <div class="col-lg-2">
                    <label>Enter  Part_No</label><br>
                    <input type="text" name="Part_No" required class="form-control">
                </div>
                <div class="col-lg-2">
                    <label>Enter  Description</label><br>
                    <input type="text" name="Description" required class="form-control">
                </div>
                <div class="col-lg-2">
                    <label>Enter  Quantity</label><br>
                    <input type="number" name="Qty" required class="form-control">
                </div>
                <div class="col-lg-4">
                    <br>
                    
                    <button class="form-control btn btn-danger">Add Inventory</button>
                    </form>
                </div>
        </div>
        </div>
    </div>
       <div class="card">
	       <div class="card-header">
		       Bulk Upload
	       </div>
	       <div class="card-body">
		<form action ="/inventory_upload" method="POST" enctype="multipart/form-data">
			<div class="row">
			<div class="col-lg-6">
			<input type="file" name="file" class="form-control" accept=".csv" required>
			</div>
			<div class="col-lg-6">
				<button class="btn btn-danger" type="submit">  Upload </button>
			</div>
			</div>
		</form>

	       </div>
            </div><br>
            <div class="card mb-4">
                                <div class="card-header">
                                    
                                            <i class="fas fa-table me-1"></i>
                                            Inventory List
                                       
                                </div>
                                <div class="card-body">
                                    <table id="datatablesSimple">
                                        <thead>
                                            <tr>
                                                <th>SL NO</th>
                                                <th>OEM</th>
                                                <th>Part Number</th>
                                                <th>Description</th>
                                                <th>Quantity</th>
						
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tfoot>
                                            <tr>
                                                <th>SL NO</th>
                                                <th>OEM</th>
                                                <th>Part Number</th>
                                                <th>Description</th>
                                                <th>Quantity</th>
						
                                                <th>Action </th>
                                            </tr>
                                        </tfoot>
                                        <tbody>
                                            {% for row in data %}
        <tr>
          
          
            <td>{{ row[0] }}</td>
            <td>{{ row[1] }}</td>
            <td>{{ row[2] }}</td>
            <td><a href="/inventorylogs?desc={{ row[3] }}" style="text-decoration: none;color: black">{{ row[3] }}</a></td>
	    <td>{{ row[4] }}</td>
        	
    
	    </td>
            <td>
                <a href="/inventoryedit?id={{ row[0] }}" class="btn btn-danger btn-sm">Edit</a>
                                    <a href="/inventorydelete?id={{ row[0] }}" class="btn btn-danger btn-sm">Delete</a>
                 </td>
           
           
        </tr>
        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
</div>




{% endblock %}
       
{% else %}
<script>
 // Display a SweetAlert message and logout after 5 seconds
 window.onload = function() {
     Swal.fire({
         title: 'Access Denied!',
         text: 'You are not allowed to view this page.',
         icon: 'warning',
         timer: 5000, // Automatically close the alert after 5 seconds
         timerProgressBar: true,
         showConfirmButton: false
     }).then((result) => {
         // Redirect to logout page after the alert is closed
         if (result.dismiss === Swal.DismissReason.timer) {
             window.location.href = "/logout";
         }
     });
 };
</script>
{% endif %}
